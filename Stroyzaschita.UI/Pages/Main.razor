@page "/"
<PageTitle>Главная страница</PageTitle>
@using MudBlazor

<MudLayout>

    <MudAppBar Elevation="0" Color="Color.Default" Class="px-6 py-2 d-flex justify-between align-center">
        <MudText Typo="Typo.h5" Class="fw-bold">Стройзащита</MudText>
        <MudButton Color="Color.Primary" Variant="Variant.Filled">Войти</MudButton>
    </MudAppBar>

    <MudDivider Class="my-0" />

    <MudPaper Square Class="px-6 py-2">
        <MudTabs Rounded="true" Border="false" Dense="true" Centered="true" @bind-ActivePanelIndex="_activeTabIndex">
            <MudTabPanel Text="Главная" />
            <MudTabPanel Text="О нас" />
            <MudTabPanel Text="Контакты" />
        </MudTabs>
    </MudPaper>

    <MudDivider Class="mb-10" />

    <MudContainer MaxWidth="MaxWidth.Large" Class="d-flex flex-column align-center justify-center text-center" Style="min-height: 70vh;">
        <MudPaper Elevation="3" Class="pa-8 rounded-xl">
            <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Large" Class="mb-6">Войти</MudButton>
            <MudText Typo="Typo.subtitle1" Class="mx-auto" Style="max-width: 500px;">
                Пример Текста
            </MudText>
        </MudPaper>
    </MudContainer>

</MudLayout>

@code {
    private int _activeTabIndex = 0;

    [Inject] NavigationManager NavigationManager { get; set; }

    protected override void OnInitialized() {
        var path = NavigationManager.Uri.Replace(NavigationManager.BaseUri, "/");
        _activeTabIndex = path switch {
            "/about" => 1,
            "/contacts" => 2,
            _ => 0
        };
    }

    protected override void OnAfterRender(bool firstRender) {
        if (firstRender)
            MudTabsTabIndexChanged(_activeTabIndex);
    }

    private void MudTabsTabIndexChanged(int index) {
        _activeTabIndex = index;
        var newUri = index switch {
            0 => "/",
            1 => "/about",
            2 => "/contacts",
            _ => "/"
        };
        NavigationManager.NavigateTo(newUri);
    }
}
